---
- name: Prepare Openshift dependencies
  hosts: all
  gather_facts: no

  roles:
    - openshift


- name: Terraform Section
  hosts: all
  gather_facts: no
  become: yes
  vars:
    #master_ignition: "{{lookup('file', '/root/openshift/ocp4/master.ign')}}"
    worker_ignition: "{{lookup('file', '/root/openshift/ocp4/worker.ign')}}"
  tags: terraform
  tasks:
    - name: Debug variables
      debug: msg="{{lookup('file', '/root/openshift/ocp4/master.ign')}}"

    - name: create Terraform configuration file
      template:
        src: terraform.tfvars.j2
        dest: ~/opentshift/installer/upi/vsphere/terrafrom.tfvars
